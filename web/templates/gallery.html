{% extends "base.html" %}

{% block title %}Gallery - Pixiv-XP-Pusher{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">ğŸ–¼ï¸ æ¨é€å†å²ç”»å»Š</h2>
        <span style="color: var(--text-secondary);">å…± {{ total }} å¼ ä½œå“</span>
    </div>

    {% if items %}
    <div class="gallery-grid">
        {% for item in items %}
        <div class="gallery-item">
            <img src="/api/proxy/image/{{ item.illust_id }}" alt="Illust {{ item.illust_id }}" loading="lazy"
                style="background: #2a2a3e;">
            <div class="overlay">
                <a href="https://www.pixiv.net/artworks/{{ item.illust_id }}" target="_blank">
                    #{{ item.illust_id }}
                </a>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- åˆ†é¡µ -->
    {% if total > limit %}
    <div style="margin-top: 1.5rem; text-align: center;">
        {% if page > 1 %}
        <a href="/gallery?page={{ page - 1 }}" class="btn" style="margin-right: 0.5rem;">ä¸Šä¸€é¡µ</a>
        {% endif %}
        <span style="color: var(--text-secondary);">ç¬¬ {{ page }} / {{ (total // limit) + 1 }} é¡µ</span>
        {% if page * limit < total %} <a href="/gallery?page={{ page + 1 }}" class="btn" style="margin-left: 0.5rem;">
            ä¸‹ä¸€é¡µ</a>
            {% endif %}
    </div>
    {% endif %}

    {% else %}
    <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
        æš‚æ— æ¨é€è®°å½•ã€‚å‘é€ <code>/push</code> å¼€å§‹æ‚¨çš„ç¬¬ä¸€æ¬¡æ¨é€å§ï¼
    </p>
    {% endif %}
</div>
{% endblock %}