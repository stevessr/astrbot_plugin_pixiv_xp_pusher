{% extends "base.html" %}

{% block title %}Dashboard - Pixiv-XP-Pusher{% endblock %}

{% block content %}
<!-- ç»Ÿè®¡æ¦‚è§ˆ -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">ğŸ“Š æ¨é€ç»Ÿè®¡ (7å¤©)</h2>
    </div>
    <div class="stats-grid">
        <div class="stat-item">
            <div class="stat-value">{{ stats.total_pushed }}</div>
            <div class="stat-label">æ¨é€ä½œå“</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">{{ stats.likes }}</div>
            <div class="stat-label">â¤ï¸ å–œæ¬¢</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">{{ stats.dislikes }}</div>
            <div class="stat-label">ğŸ‘ ä¸å–œæ¬¢</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">{{ like_rate }}</div>
            <div class="stat-label">ç‚¹èµç‡</div>
        </div>
    </div>
</div>

<!-- XP ç”»åƒè¯äº‘ -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">ğŸ¯ XP ç”»åƒ Top 20</h2>
    </div>
    {% if top_tags %}
    <div class="tag-cloud">
        {% for tag, weight in top_tags %}
        <span class="tag" style="font-size: {{ 0.8 + weight * 0.1 }}rem;">
            {{ tag }}
            <span class="weight">{{ "%.1f"|format(weight) }}</span>
        </span>
        {% endfor %}
    </div>
    {% else %}
    <p style="color: var(--text-secondary);">æš‚æ— æ•°æ®ï¼Œè¯·å…ˆè¿è¡Œä¸€æ¬¡æ¨é€ä»»åŠ¡ã€‚</p>
    {% endif %}
</div>

<!-- çƒ­é—¨ç”»å¸ˆ -->
{% if stats.top_artists %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">ğŸ¨ çƒ­é—¨ç”»å¸ˆ (7å¤©)</h2>
    </div>
    <div class="tag-cloud">
        {% for artist_id, count in stats.top_artists %}
        <a href="https://www.pixiv.net/users/{{ artist_id }}" target="_blank" class="tag"
            style="text-decoration: none;">
            ID: {{ artist_id }}
            <span class="weight">{{ count }} å¼ </span>
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- çƒ­é—¨æ ‡ç­¾ -->
{% if stats.top_tags %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">ğŸ·ï¸ çƒ­é—¨æ¨é€æ ‡ç­¾ (7å¤©)</h2>
    </div>
    <div class="tag-cloud">
        {% for tag, count in stats.top_tags %}
        <span class="tag">
            #{{ tag }}
            <span class="weight">{{ count }}</span>
        </span>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- å¿«æ·æ“ä½œ -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">âš¡ å¿«æ·æ“ä½œ</h2>
    </div>
    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
        ä½¿ç”¨å‘½ä»¤è¡Œæ‰§è¡Œæ¨é€ä»»åŠ¡ï¼Œæˆ–é€šè¿‡ Telegram Bot å‘é€ <code>/push</code> æŒ‡ä»¤ã€‚
    </p>
    <code style="display: block; background: var(--bg-secondary); padding: 1rem; border-radius: 6px;">
        python main.py --once
    </code>
</div>
{% endblock %}