{
  "auto_start": {
    "description": "启动时自动运行推送调度",
    "type": "bool",
    "default": true
  },
  "run_immediately": {
    "description": "调度启动后立刻执行一次",
    "type": "bool",
    "default": false
  },
  "test_mode": {
    "description": "轻量测试模式",
    "type": "bool",
    "default": false
  },
  "use_pixiv_cat": {
    "description": "使用 pixiv.cat 作为图片代理",
    "type": "bool",
    "default": true
  },
  "push_sessions": {
    "description": "主动推送会话（umo 列表）",
    "type": "list",
    "hint": "格式示例：default:GroupMessage:123456 或 default:PrivateMessage:123456",
    "default": []
  },
  "strategies": {
    "description": "启用的策略列表",
    "type": "list",
    "default": ["xp_search", "related", "ranking", "subscription"]
  },
  "ai": {
    "description": "AI 增强功能",
    "type": "object",
    "items": {
      "embedding": {
        "description": "语义匹配（Embedding）",
        "type": "object",
        "items": {
          "enabled": {
            "description": "启用 Embedding",
            "type": "bool",
            "default": false
          },
          "provider": {
            "description": "Embedding Provider (openai/local)",
            "type": "string",
            "condition": {
              "enabled": true
            },
            "options": ["openai", "local"],
            "default": "openai"
          },
          "model": {
            "description": "Embedding 模型名（OpenAI 或本地模型名）",
            "type": "string",
            "condition": {
              "enabled": true
            },
            "default": "text-embedding-3-small"
          },
          "api_key": {
            "description": "Embedding API Key",
            "type": "string",
            "condition": {
              "enabled": true,
              "provider": "openai"
            },
            "default": ""
          },
          "base_url": {
            "description": "Embedding API Base URL",
            "type": "string",
            "condition": {
              "enabled": true,
              "provider": "openai"
            },
            "default": ""
          },
          "dimensions": {
            "description": "向量维度",
            "type": "int",
            "condition": {
              "enabled": true
            },
            "default": 256
          },
          "cache_ttl_days": {
            "description": "缓存天数",
            "type": "int",
            "condition": {
              "enabled": true
            },
            "default": 30
          },
          "semantic_weight": {
            "description": "语义分数权重",
            "type": "float",
            "condition": {
              "enabled": true
            },
            "default": 0.3
          }
        }
      },
      "scorer": {
        "description": "LLM 精排评分",
        "type": "object",
        "items": {
          "enabled": {
            "description": "启用精排评分",
            "type": "bool",
            "default": false
          },
          "provider": {
            "description": "LLM Provider（openai 等兼容 API）",
            "type": "string",
            "condition": {
              "ai.scorer.enabled": true
            },
            "default": "openai"
          },
          "model": {
            "description": "LLM 模型名",
            "type": "string",
            "condition": {
              "ai.scorer.enabled": true
            },
            "default": ""
          },
          "api_key": {
            "description": "LLM API Key",
            "type": "string",
            "condition": {
              "ai.scorer.enabled": true
            },
            "default": ""
          },
          "base_url": {
            "description": "LLM API Base URL",
            "type": "string",
            "condition": {
              "ai.scorer.enabled": true
            },
            "default": ""
          },
          "max_candidates": {
            "description": "最大候选数量",
            "type": "int",
            "condition": {
              "enabled": true
            },
            "default": 50
          },
          "score_weight": {
            "description": "精排分数权重",
            "type": "float",
            "condition": {
              "enabled": true
            },
            "default": 0.3
          },
          "vision_enabled": {
            "description": "模型是否具备视觉能力",
            "type": "bool",
            "condition": {
              "enabled": true
            },
            "default": false
          },
          "image_max_bytes": {
            "description": "视觉评分图片最大字节数",
            "type": "int",
            "condition": {
              "enabled": true,
              "vision_enabled": true
            },
            "default": 2000000
          }
        }
      }
    }
  },
  "max_pages": {
    "description": "多图作品最大页数",
    "type": "int",
    "default": 10
  },
  "multi_page_mode": {
    "description": "多图发送模式",
    "type": "string",
    "options": ["cover_link", "multi_image"],
    "default": "cover_link"
  },
  "pixiv": {
    "description": "Pixiv 配置",
    "type": "object",
    "items": {
      "refresh_token": {
        "description": "Pixiv refresh token",
        "type": "string",
        "default": ""
      },
      "sync_token": {
        "description": "同步专用 token（可选）",
        "type": "string",
        "default": ""
      },
      "user_id": {
        "description": "Pixiv 用户 ID",
        "type": "int",
        "default": 0
      }
    }
  },
  "scheduler": {
    "description": "调度配置",
    "type": "object",
    "items": {
      "cron": {
        "description": "推送 cron 表达式",
        "type": "string",
        "default": "0 12 * * *"
      },
      "coalesce": {
        "description": "错过任务是否合并",
        "type": "bool",
        "default": true
      },
      "daily_report_cron": {
        "description": "每日维护任务 cron",
        "type": "string",
        "default": "0 0 * * *"
      }
    }
  },
  "filter": {
    "description": "过滤与推送策略",
    "type": "object",
    "items": {
      "daily_limit": {
        "description": "单次推送上限",
        "type": "int",
        "default": 20
      },
      "exclude_ai": {
        "description": "过滤 AI 作品",
        "type": "bool",
        "default": true
      },
      "min_create_days": {
        "description": "过滤 N 天前作品",
        "type": "int",
        "default": 0
      },
      "max_per_artist": {
        "description": "单画师最多推送数",
        "type": "int",
        "default": 3
      },
      "artist_boost": {
        "description": "订阅画师加成",
        "type": "float",
        "default": 0.3
      },
      "r18_mode": {
        "description": "R18 模式：mixed/safe/r18_only",
        "type": "string",
        "default": "mixed"
      },
      "shuffle_factor": {
        "description": "随机打散因子",
        "type": "float",
        "default": 0.0
      },
      "exploration_ratio": {
        "description": "探索比例",
        "type": "float",
        "default": 0.0
      },
      "blacklist_tags": {
        "description": "黑名单标签",
        "type": "list",
        "default": []
      },
      "min_match_score": {
        "description": "最低匹配分数",
        "type": "float",
        "default": 0.0
      },
      "match_weight": {
        "description": "匹配分数权重",
        "type": "float",
        "default": 0.6
      }
    }
  },
  "fetcher": {
    "description": "内容抓取配置",
    "type": "object",
    "items": {
      "bookmark_threshold": {
        "description": "最低收藏阈值",
        "type": "object",
        "items": {
          "search": {
            "description": "搜索阈值",
            "type": "int",
            "default": 1000
          },
          "subscription": {
            "description": "订阅阈值",
            "type": "int",
            "default": 0
          }
        }
      },
      "subscribed_artists": {
        "description": "额外关注画师 ID 列表",
        "type": "list",
        "default": []
      },
      "date_range_days": {
        "description": "最近 N 天作品",
        "type": "int",
        "default": 7
      },
      "search_limit": {
        "description": "搜索数量限制",
        "type": "int",
        "default": 50
      },
      "ranking": {
        "description": "排行榜配置",
        "type": "object",
        "items": {
          "enabled": {
            "description": "启用排行榜",
            "type": "bool",
            "default": true
          },
          "modes": {
            "description": "排行榜模式",
            "type": "list",
            "default": ["day", "week", "month"]
          },
          "limit": {
            "description": "排行榜拉取数量",
            "type": "int",
            "default": 100
          }
        }
      },
      "mab_limits": {
        "description": "策略占比限制",
        "type": "object",
        "items": {
          "min_quota": {
            "description": "最小占比",
            "type": "float",
            "default": 0.2
          },
          "max_quota": {
            "description": "最大占比",
            "type": "float",
            "default": 0.6
          }
        }
      }
    }
  },
  "profiler": {
    "description": "画像配置",
    "type": "object",
    "items": {
      "scan_limit": {
        "description": "扫描收藏数量",
        "type": "int",
        "default": 1000
      },
      "discovery_rate": {
        "description": "探索概率",
        "type": "float",
        "default": 0.1
      },
      "time_decay_days": {
        "description": "时间衰减半衰期",
        "type": "int",
        "default": 180
      },
      "saturation_threshold": {
        "description": "高频标签饱和阈值",
        "type": "float",
        "default": 0.5
      },
      "top_n": {
        "description": "保留 Top 标签数",
        "type": "int",
        "default": 20
      },
      "include_private": {
        "description": "包含私密收藏",
        "type": "bool",
        "default": true
      },
      "stop_words": {
        "description": "停用词列表",
        "type": "list",
        "default": ["original", "manga", "pixiv", "illustration"]
      },
      "ai": {
        "description": "AI 标签清洗",
        "type": "object",
        "items": {
          "enabled": {
            "description": "启用 AI",
            "type": "bool",
            "default": false
          },
          "provider": {
            "description": "AI 提供商",
            "type": "string",
            "default": "openai",
            "condition": {
              "enabled": true
            }
          },
          "api_key": {
            "description": "API Key",
            "type": "string",
            "default": "",
            "condition": {
              "enabled": true
            }
          },
          "base_url": {
            "description": "API Base URL",
            "type": "string",
            "default": "",
            "condition": {
              "enabled": true
            }
          },
          "model": {
            "description": "模型名称",
            "type": "string",
            "default": "",
            "condition": {
              "enabled": true
            }
          },
          "concurrency": {
            "description": "并发数",
            "type": "int",
            "default": 10,
            "condition": {
              "enabled": true
            }
          },
          "batch_size": {
            "description": "批次大小",
            "type": "int",
            "default": 200,
            "condition": {
              "enabled": true
            }
          },
          "filter_meaningless": {
            "description": "过滤无意义标签",
            "type": "bool",
            "default": true,
            "condition": {
              "enabled": true
            }
          },
          "merge_synonyms": {
            "description": "合并同义词",
            "type": "bool",
            "default": true,
            "condition": {
              "enabled": true
            }
          }
        }
      }
    }
  },
  "network": {
    "description": "网络与限流",
    "type": "object",
    "items": {
      "requests_per_minute": {
        "description": "每分钟请求数",
        "type": "int",
        "default": 60
      },
      "random_delay": {
        "description": "请求随机延迟（秒）",
        "type": "list",
        "default": [1.0, 3.0]
      },
      "max_concurrency": {
        "description": "下载并发数",
        "type": "int",
        "default": 5
      },
      "proxy_url": {
        "description": "代理地址",
        "type": "string",
        "default": ""
      }
    }
  }
}
